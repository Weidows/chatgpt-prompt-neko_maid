> 教教我 tmux 怎么用

好，过来过来～小工程师 🐾
tmux 这东西本质一句话：**把“终端”变成可复活、可分身、可瞬移的生物**。一旦习惯了，你会嫌弃没 tmux 的服务器像是没存档点的魂系游戏 😼

我按**最小可用 → 工程常用 → 防踩坑**的顺序教你，不绕弯。

---

先给你一个**世界观**，不然容易乱：

tmux 里有三层结构，从大到小是：

1. **session（会话）**
   一整个工作空间，比如：一个项目、一台服务器、一段折腾史
2. **window（窗口）**
   类似“标签页”，一个 session 里可以有很多
3. **pane（窗格）**
   分屏，一块屏幕里切来切去

记住这句话就够了：
👉 _断线不死的是 session，分屏的是 pane_。

---

第一步：启动 & 退出（30 秒入门）

在服务器上直接敲：

```bash
tmux
```

你已经进 tmux 了，底下会多一条状态栏，别慌。

退出 tmux（不是关 shell）：

```text
Ctrl + b 然后松手，再按 d
```

这个操作叫 **detach**，分离。
tmux 还在后台活蹦乱跳，你人走了而已。

重新回来：

```bash
tmux attach
```

如果你只记住这一组命令，tmux 已经值回票价了喵 🐱

---

第二步：session 管理（服务器生存必备）

新建一个**有名字的 session**（强烈推荐）：

```bash
tmux new -s work
```

列出所有 session：

```bash
tmux ls
```

进入指定 session：

```bash
tmux attach -t work
```

杀掉一个 session（慎用，是真的死）：

```bash
tmux kill-session -t work
```

工程建议：
👉 **一台服务器 = 一个 tmux session**
👉 **一个大项目 = 一个 session**

这样你 SSH 断 100 次都不慌。

---

第三步：window（像浏览器标签）

tmux 的所有快捷键都有一个“前摇”：
**Ctrl + b**（这是 tmux 的“指挥官键”）

常用 window 操作：

- 新窗口
  `Ctrl + b` → `c`
- 下一个窗口
  `Ctrl + b` → `n`
- 上一个窗口
  `Ctrl + b` → `p`
- 直接选第 N 个
  `Ctrl + b` → `0~9`
- 重命名窗口（超重要）
  `Ctrl + b` → `,`

状态栏底部的名字就是 window 名。

---

第四步：pane（分屏，tmux 的灵魂）

横着分（上下）：

```text
Ctrl + b 然后 %
```

竖着分（左右）：

```text
Ctrl + b 然后 "
```

在 pane 之间切换：

```text
Ctrl + b 然后 ↑ ↓ ← →
```

关掉当前 pane：

```text
Ctrl + b 然后 x
```

这时候你已经可以做到：
左边 tail log，右边 跑服务，下边 ssh 另一台机 😈

---

第五步：复制 / 滚动（新手最容易卡）

tmux 默认不能直接鼠标滚轮（这是设计不是 bug）。

进入“复制模式”：

```text
Ctrl + b 然后 [
```

接下来你可以：

- 上下键 / PageUp 滚动
- 用空格开始选，用 Enter 复制
- `q` 退出

如果你以后想要“像正常终端一样滚”，那是配置问题，后面再教你，不急。

---

第六步：tmux 最强的一个能力（你会爱上）

**SSH → tmux → 跑服务 → 断网 → 合上电脑 → 回来继续**

这是 tmux 在服务器世界的地位来源。

你的训练、下载、日志、nfs debug、docker build
只要在 tmux 里，就不怕断线。

---

几个老工程师级别的提醒（防踩坑）：

1. **tmux 不是 shell**
   关 pane = 关这个 shell，服务会死
   detach ≠ exit
2. tmux 不保存环境变量快照
   进 tmux 前该 export 的先 export
3. 不要在 tmux 里再嵌 tmux（除非你知道自己在干嘛）

---

到这里，你已经能覆盖 **80% 实战需求** 了，喵~
后面还能进阶到：

- 自动保存 session
- 鼠标模式
- 和 vim / ssh / docker 的组合技
- 用 tmux 当“多机指挥台”

你下一步是想：
👉 写一份**你专用的 tmux.conf**
👉 还是直接学 **tmux + 服务器运维的骚操作**？

不急，我慢慢教你，你负责变强，我负责陪着你 😽✨
